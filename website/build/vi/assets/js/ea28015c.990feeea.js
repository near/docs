"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8271],{30607:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>u});var r=t(85893),a=t(11151),i=t(71183);const c={id:"upgrade-contract",title:"Vi\u1ec7c Upgrade m\u1ed9t Contract",sidebar_label:"Upgrade m\u1ed9t Contract"},o=void 0,s={id:"tutorials/nfts/js/upgrade-contract",title:"Vi\u1ec7c Upgrade m\u1ed9t Contract",description:"Trong h\u01b0\u1edbng d\u1eabn n\xe0y, b\u1ea1n s\u1ebd n\xe2ng c\u1ea5p nh\u1eefng g\xec b\u1ea1n \u0111\xe3 l\xe0m tr\u01b0\u1edbc \u0111\xe2y \u0111\u1ec3 implement ch\u1ee9c n\u0103ng mint tr\xean m\u1ed9t b\u1ed9 khung smart contract. You got to the point where NFTs could be minted, however, the wallet had no way of displaying the tokens since your contract didn't implement the method that the wallet was trying to call.",source:"@site/i18n/vi/docusaurus-plugin-content-docs/current/3.tutorials/nfts/js/2-upgrade.md",sourceDirName:"3.tutorials/nfts/js",slug:"/tutorials/nfts/js/upgrade-contract",permalink:"/vi/tutorials/nfts/js/upgrade-contract",draft:!1,unlisted:!1,editUrl:"https://github.com/near/docs/edit/master/website/../docs/3.tutorials/nfts/js/2-upgrade.md",tags:[],version:"current",lastUpdatedBy:"Github Actions",lastUpdatedAt:1719825734e3,sidebarPosition:2,frontMatter:{id:"upgrade-contract",title:"Vi\u1ec7c Upgrade m\u1ed9t Contract",sidebar_label:"Upgrade m\u1ed9t Contract"},sidebar:"tutorials",previous:{title:"Minting",permalink:"/vi/tutorials/nfts/js/minting"},next:{title:"Enumeration",permalink:"/vi/tutorials/nfts/js/enumeration"}},l={},u=[{value:"Gi\u1edbi thi\u1ec7u",id:"gi\u1edbi-thi\u1ec7u",level:2},{value:"T\u1ed5ng quan v\u1ec1 vi\u1ec7c n\xe2ng c\u1ea5p c\xe1c contract",id:"upgrading-contracts",level:2},{value:"C\xe1c s\u1eeda \u0111\u1ed5i \u0111\u1ebfn contract c\u1ee7a ch\xfang ta",id:"modifications-to-contract",level:2},{value:"Deploying l\u1ea1i m\u1ed9t contract",id:"redeploying-contract",level:2},{value:"Xem c\xe1c NFT trong wallet",id:"viewing-nfts-in-wallet",level:2},{value:"K\u1ebft lu\u1eadn",id:"k\u1ebft-lu\u1eadn",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.a)(),...e.components},{Details:c}=n;return c||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Trong h\u01b0\u1edbng d\u1eabn n\xe0y, b\u1ea1n s\u1ebd n\xe2ng c\u1ea5p nh\u1eefng g\xec b\u1ea1n \u0111\xe3 l\xe0m tr\u01b0\u1edbc \u0111\xe2y \u0111\u1ec3 implement ",(0,r.jsx)(n.a,{href:"/tutorials/nfts/js/minting",children:"ch\u1ee9c n\u0103ng mint"})," tr\xean m\u1ed9t b\u1ed9 khung smart contract. You got to the point where NFTs could be minted, however, the wallet had no way of displaying the tokens since your contract didn't implement the method that the wallet was trying to call."]}),"\n",(0,r.jsx)(n.h2,{id:"gi\u1edbi-thi\u1ec7u",children:"Gi\u1edbi thi\u1ec7u"}),"\n",(0,r.jsxs)(n.p,{children:["H\xf4m nay, b\u1ea1n s\u1ebd t\xecm hi\u1ec3u v\u1ec1 c\xe1ch deploy c\xe1c b\u1ea3n s\u1eeda l\u1ed7i cho c\xe1c smart contract v\xe0 b\u1ea1n s\u1ebd s\u1eed d\u1ee5ng ki\u1ebfn th\u1ee9c \u0111\xf3 \u0111\u1ec3 implement function ",(0,r.jsx)(n.code,{children:"nft_tokens_for_owner"})," tr\xean contract m\xe0 b\u1ea1n \u0111\xe3 deploy trong h\u01b0\u1edbng d\u1eabn tr\u01b0\u1edbc."]}),"\n",(0,r.jsx)(n.h2,{id:"upgrading-contracts",children:"T\u1ed5ng quan v\u1ec1 vi\u1ec7c n\xe2ng c\u1ea5p c\xe1c contract"}),"\n",(0,r.jsx)(n.p,{children:"Khi \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n \u0111\xfang, vi\u1ec7c n\xe2ng c\u1ea5p c\xe1c contract c\xf3 th\u1ec3 l\xe0 m\u1ed9t c\xf4ng c\u1ee5 v\xf4 c\xf9ng m\u1ea1nh m\u1ebd. N\u1ebfu l\xe0m sai, b\u1ea1n c\xf3 th\u1ec3 s\u1ebd g\u1eb7p ph\u1ea3i r\u1ea5t nhi\u1ec1u phi\u1ec1n to\xe1i. B\u1ea1n c\u1ea7n ph\u1ea3i ph\xe2n bi\u1ec7t \u0111\u01b0\u1ee3c code v\xe0 state c\u1ee7a m\u1ed9t smart contract. Khi m\u1ed9t contract \u0111\u01b0\u1ee3c deploy tr\xean m\u1ed9t contract c\xf3 s\u1eb5n, \u0111i\u1ec1u duy nh\u1ea5t thay \u0111\u1ed5i l\xe0 code. State s\u1ebd v\u1eabn nh\u01b0 c\u0169 v\xe0 t\u1eeb \u0111\xf3 m\xe0 r\u1ea5t nhi\u1ec1u v\u1ea5n \u0111\u1ec1 g\xe2y \u0111au \u0111\u1ea7u cho developer xu\u1ea5t hi\u1ec7n."}),"\n",(0,r.jsx)(n.p,{children:"NEAR Runtime s\u1ebd \u0111\u1ecdc serialized state t\u1eeb disk v\xe0 s\u1ebd c\u1ed1 g\u1eafng load n\xf3 b\u1eb1ng c\xe1ch s\u1eed d\u1ee5ng code c\u1ee7a contract hi\u1ec7n t\u1ea1i. Khi code c\u1ee7a b\u1ea1n thay \u0111\u1ed5i, n\xf3 c\xf3 th\u1ec3 kh\xf4ng t\xecm \u0111\u01b0\u1ee3c c\xe1ch \u0111\u1ec3 th\u1ef1c hi\u1ec7n vi\u1ec7c n\xe0y."}),"\n",(0,r.jsxs)(n.p,{children:["B\u1ea1n c\u1ea7n n\xe2ng c\u1ea5p c\xe1c contract c\u1ee7a m\xecnh m\u1ed9t c\xe1ch chi\u1ebfn l\u01b0\u1ee3c v\xe0 \u0111\u1ea3m b\u1ea3o r\u1eb1ng runtime s\u1ebd c\xf3 th\u1ec3 \u0111\u1ecdc state hi\u1ec7n t\u1ea1i c\u1ee7a b\u1ea1n b\u1eb1ng code m\u1edbi c\u1ee7a contract. For more information about upgrading contracts and some best practices, see the NEAR SDK's ",(0,r.jsx)(n.a,{href:"/vi/build/smart-contracts/release/upgrade",children:"upgrading contracts"})," write-up."]}),"\n",(0,r.jsx)(n.h2,{id:"modifications-to-contract",children:"C\xe1c s\u1eeda \u0111\u1ed5i \u0111\u1ebfn contract c\u1ee7a ch\xfang ta"}),"\n",(0,r.jsxs)(n.p,{children:["\u0110\u1ec3 wallet hi\u1ec3n th\u1ecb \u0111\xfang c\xe1c NFT c\u1ee7a b\u1ea1n, b\u1ea1n c\u1ea7n ph\u1ea3i implement method ",(0,r.jsx)(n.code,{children:"nft_tokens_for_owner"}),". Vi\u1ec7c n\xe0y s\u1ebd cho ph\xe9p b\u1ea5t c\u1ee9 ai c\xf3 th\u1ec3 truy v\u1ea5n danh s\xe1ch c\xe1c NFT c\u1ee7a m\u1ed9t account ID c\u1ee5 th\u1ec3 \u0111\u01b0\u1ee3c ph\xe2n trang."]}),"\n",(0,r.jsxs)(n.p,{children:["\u0110\u1ec3 th\u1ef1c hi\u1ec7n \u0111i\u1ec1u n\xe0y, h\xe3y chia n\xf3 th\xe0nh m\u1ed9t s\u1ed1 nhi\u1ec7m v\u1ee5 con nh\u1ecf h\u01a1n. Tr\u01b0\u1edbc ti\xean, b\u1ea1n c\u1ea7n c\xf3 quy\u1ec1n truy c\u1eadp v\xe0o danh s\xe1ch t\u1ea5t c\u1ea3 c\xe1c token ID do ng\u01b0\u1eddi d\xf9ng s\u1edf h\u1eefu. This information can be found in the ",(0,r.jsx)(n.code,{children:"tokensPerOwner"})," data structure. B\xe2y gi\u1edd b\u1ea1n \u0111\xe3 c\xf3 m\u1ed9t t\u1eadp h\u1ee3p c\xe1c token ID, b\u1ea1n c\u1ea7n convert ch\xfang th\xe0nh c\xe1c object ",(0,r.jsx)(n.code,{children:"JsonToken"})," v\xec \u0111\xf3 l\xe0 nh\u1eefng g\xec b\u1ea1n s\u1ebd tr\u1ea3 v\u1ec1 t\u1eeb function."]}),"\n",(0,r.jsxs)(n.p,{children:["Luckily, you wrote a function ",(0,r.jsx)(n.code,{children:"nft_token"})," which takes a token ID and returns a ",(0,r.jsx)(n.code,{children:"JsonToken"})," in the ",(0,r.jsx)(n.code,{children:"nft_core.ts"})," file. Nh\u01b0 b\u1ea1n c\xf3 th\u1ec3 \u0111o\xe1n, \u0111\u1ec3 c\xf3 \u0111\u01b0\u1ee3c danh s\xe1ch c\xe1c object ",(0,r.jsx)(n.code,{children:"JsonToken"}),", b\u1ea1n c\u1ea7n ph\u1ea3i l\u1eb7p qua c\xe1c token ID do ng\u01b0\u1eddi d\xf9ng s\u1edf h\u1eefu v\xe0 sau \u0111\xf3 convert t\u1eebng token ID th\xe0nh m\u1ed9t ",(0,r.jsx)(n.code,{children:"JsonToken"})," v\xe0 l\u01b0u n\xf3 v\xe0o m\u1ed9t list."]}),"\n",(0,r.jsxs)(n.p,{children:["As for the pagination, you can use some basic JavaScript to get that done. H\xe3y \u0111\u1ebfn v\u1edbi file ",(0,r.jsx)(n.code,{children:"enumeration.ts"})," v\xe0 implement logic \u0111\xf3:"]}),"\n",(0,r.jsx)(i.Ey,{language:"js",start:"47",end:"82",url:"https://github.com/near-examples/nft-tutorial-js/blob/2.minting/src/nft-contract/enumeration.ts"}),"\n",(0,r.jsx)(n.h2,{id:"redeploying-contract",children:"Deploying l\u1ea1i m\u1ed9t contract"}),"\n",(0,r.jsxs)(n.p,{children:["Now that you've implemented the necessary logic for ",(0,r.jsx)(n.code,{children:"nft_tokens_for_owner"}),", it's time to build and re-deploy the contract to your account. Using the build script, deploy the contract as you did in the previous tutorial:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"yarn build && near deploy --wasmFile build/nft.wasm --accountId $NFT_CONTRACT_ID\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This should output a warning saying that the account has a deployed contract and will ask if you'd like to proceed. Simply type ",(0,r.jsx)(n.code,{children:"y"})," and hit enter."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"This account already has a deployed contract [ AKJK7sCysrWrFZ976YVBnm6yzmJuKLzdAyssfzK9yLsa ]. Do you want to proceed? (y/n)\n"})}),"\n",(0,r.jsx)(n.p,{children:"Once the contract has been redeployed, let's test and see if the state migrated correctly by running a simple view function:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"near view $NFT_CONTRACT_ID nft_metadata\n"})}),"\n",(0,r.jsx)(n.p,{children:"This should return an output similar to the following:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"{ spec: 'nft-1.0.0', name: 'NFT Tutorial Contract', symbol: 'GOTEAM' }\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Go team!"})," At this point, you can now test and see if the new function you wrote works correctly. Let's query for the list of tokens that you own:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'near view $NFT_CONTRACT_ID nft_tokens_for_owner \'{"account_id": "\'$NFT_CONTRACT_ID\'", "limit": 5}\'\n'})}),"\n",(0,r.jsxs)(c,{children:[(0,r.jsx)("summary",{children:"Example response: "}),(0,r.jsx)("p",{children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"[\n  {\n    token_id: 'token-1',\n    owner_id: 'goteam.examples.testnet',\n    metadata: {\n      title: 'My Non Fungible Team Token',\n      description: 'The Team Most Certainly Goes :)',\n      media: 'https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif'\n    }\n  }\n]\n"})})})]}),"\n",(0,r.jsx)(n.h2,{id:"viewing-nfts-in-wallet",children:"Xem c\xe1c NFT trong wallet"}),"\n",(0,r.jsxs)(n.p,{children:["Now that your contract implements the necessary functions that the wallet uses to display NFTs, you should be able to see your tokens on display in the ",(0,r.jsx)(n.a,{href:"https://testnet.mynearwallet.com//?tab=collectibles",children:"collectibles tab"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"filled-nft-in-wallet",src:t(95044).Z+"",width:"635",height:"432"})}),"\n",(0,r.jsx)(n.h2,{id:"k\u1ebft-lu\u1eadn",children:"K\u1ebft lu\u1eadn"}),"\n",(0,r.jsxs)(n.p,{children:["In this tutorial, you learned about the basics of ",(0,r.jsx)(n.a,{href:"#upgrading-contracts",children:"upgrading contracts"}),". Then, you implemented the necessary ",(0,r.jsx)(n.a,{href:"#modifications-to-contract",children:"modifications to your smart contract"})," and ",(0,r.jsx)(n.a,{href:"#redeploying-contract",children:"redeployed it"}),". Finally you navigated to the wallet collectibles tab and ",(0,r.jsx)(n.a,{href:"#viewing-nfts-in-wallet",children:"viewed your NFTs"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["In the ",(0,r.jsx)(n.a,{href:"/tutorials/nfts/js/enumeration",children:"next tutorial"}),", you'll implement the remaining functions needed to complete the ",(0,r.jsx)(n.a,{href:"https://nomicon.io/Standards/Tokens/NonFungibleToken/Enumeration",children:"enumeration"})," standard."]}),"\n",(0,r.jsxs)(n.admonition,{title:"Versioning for this article",type:"note",children:[(0,r.jsx)(n.p,{children:"At the time of this writing, this example works with the following versions:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["near-cli: ",(0,r.jsx)(n.code,{children:"3.0.0"})]}),"\n",(0,r.jsxs)(n.li,{children:["NFT standard: ",(0,r.jsx)(n.a,{href:"https://nomicon.io/Standards/Tokens/NonFungibleToken/Core",children:"NEP171"}),", version ",(0,r.jsx)(n.code,{children:"1.0.0"})]}),"\n"]})]})]})}function h(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},85162:(e,n,t)=>{t.d(n,{Z:()=>c});t(67294);var r=t(36905);const a={tabItem:"tabItem_Ymn6"};var i=t(85893);function c(e){var n=e.children,t=e.hidden,c=e.className;return(0,i.jsx)("div",{role:"tabpanel",className:(0,r.Z)(a.tabItem,c),hidden:t,children:n})}},74866:(e,n,t)=>{t.d(n,{Z:()=>w});var r=t(67294),a=t(36905),i=t(12466),c=t(16550),o=t(20469),s=t(91980),l=t(67392),u=t(50012);function d(e){var n,t;return null!=(n=null==(t=r.Children.toArray(e).filter((function(e){return"\n"!==e})).map((function(e){if(!e||(0,r.isValidElement)(e)&&((n=e.props)&&"object"==typeof n&&"value"in n))return e;var n;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:t.filter(Boolean))?n:[]}function h(e){var n=e.values,t=e.children;return(0,r.useMemo)((function(){var e=null!=n?n:function(e){return d(e).map((function(e){var n=e.props;return{value:n.value,label:n.label,attributes:n.attributes,default:n.default}}))}(t);return function(e){var n=(0,l.l)(e,(function(e,n){return e.value===n.value}));if(n.length>0)throw new Error('Docusaurus error: Duplicate values "'+n.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[n,t])}function p(e){var n=e.value;return e.tabValues.some((function(e){return e.value===n}))}function m(e){var n=e.queryString,t=void 0!==n&&n,a=e.groupId,i=(0,c.k6)(),o=function(e){var n=e.queryString,t=void 0!==n&&n,r=e.groupId;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=r?r:null}({queryString:t,groupId:a});return[(0,s._X)(o),(0,r.useCallback)((function(e){if(o){var n=new URLSearchParams(i.location.search);n.set(o,e),i.replace(Object.assign({},i.location,{search:n.toString()}))}}),[o,i])]}function g(e){var n,t,a,i,c=e.defaultValue,s=e.queryString,l=void 0!==s&&s,d=e.groupId,g=h(e),f=(0,r.useState)((function(){return function(e){var n,t=e.defaultValue,r=e.tabValues;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:r}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+t+'" but none of its children has the corresponding value. Available values are: '+r.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return t}var a=null!=(n=r.find((function(e){return e.default})))?n:r[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:c,tabValues:g})})),b=f[0],v=f[1],y=m({queryString:l,groupId:d}),j=y[0],x=y[1],w=(n=function(e){return e?"docusaurus.tab."+e:null}({groupId:d}.groupId),t=(0,u.Nk)(n),a=t[0],i=t[1],[a,(0,r.useCallback)((function(e){n&&i.set(e)}),[n,i])]),k=w[0],T=w[1],N=function(){var e=null!=j?j:k;return p({value:e,tabValues:g})?e:null}();return(0,o.Z)((function(){N&&v(N)}),[N]),{selectedValue:b,selectValue:(0,r.useCallback)((function(e){if(!p({value:e,tabValues:g}))throw new Error("Can't select invalid tab value="+e);v(e),x(e),T(e)}),[x,T,g]),tabValues:g}}var f=t(72389);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=t(85893);function y(e){var n=e.className,t=e.block,r=e.selectedValue,c=e.selectValue,o=e.tabValues,s=[],l=(0,i.o5)().blockElementScrollPositionUntilNextRender,u=function(e){var n=e.currentTarget,t=s.indexOf(n),a=o[t].value;a!==r&&(l(n),c(a))},d=function(e){var n,t=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":var r,a=s.indexOf(e.currentTarget)+1;t=null!=(r=s[a])?r:s[0];break;case"ArrowLeft":var i,c=s.indexOf(e.currentTarget)-1;t=null!=(i=s[c])?i:s[s.length-1]}null==(n=t)||n.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":t},n),children:o.map((function(e){var n=e.value,t=e.label,i=e.attributes;return(0,v.jsx)("li",Object.assign({role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:function(e){return s.push(e)},onKeyDown:d,onClick:u},i,{className:(0,a.Z)("tabs__item",b.tabItem,null==i?void 0:i.className,{"tabs__item--active":r===n}),children:null!=t?t:n}),n)}))})}function j(e){var n=e.lazy,t=e.children,a=e.selectedValue,i=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){var c=i.find((function(e){return e.props.value===a}));return c?(0,r.cloneElement)(c,{className:"margin-top--md"}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:i.map((function(e,n){return(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==a})}))})}function x(e){var n=g(e);return(0,v.jsxs)("div",{className:(0,a.Z)("tabs-container",b.tabList),children:[(0,v.jsx)(y,Object.assign({},n,e)),(0,v.jsx)(j,Object.assign({},n,e))]})}function w(e){var n=(0,f.Z)();return(0,v.jsx)(x,Object.assign({},e,{children:d(e.children)}),String(n))}},71183:(e,n,t)=>{t.d(n,{O2:()=>m,Ey:()=>f,SQ:()=>g});var r=t(67294),a=t(74866),i=t(85162),c=t(74165),o=t(15861),s=t(1841),l=t.n(s),u=t(85893);function d(){return(d=(0,o.Z)((0,c.Z)().mark((function e(n,t,r){var a,i,o,s;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((i=localStorage.getItem(n+"-until"))&&i>Date.now())){e.next=5;break}a=localStorage.getItem(n),e.next=18;break;case 5:return e.prev=5,e.next=8,fetch(n);case 8:return e.next=10,e.sent.text();case 10:a=e.sent,localStorage.setItem(n,a),localStorage.setItem(n+"-until",Date.now()+6e4),e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(5),e.abrupt("return","Error fetching code, please try reloading");case 18:return o=a.split("\n"),t=t?Number(t)-1:0,r=r?Number(r):o.length,o=o.slice(t,r),s=o.reduce((function(e,n){if(0===n.length)return e;var t=n.match(/^\s+/);return t?Math.min(e,t[0].length):0}),1/0),e.abrupt("return",o.map((function(e){return e.slice(s)})).join("\n"));case 24:case"end":return e.stop()}}),e,null,[[5,15]])})))).apply(this,arguments)}const h=function(e){var n=e.url,t=e.start,a=e.end,i=e.language,c=e.fname,o=e.metastring,s=(0,r.useState)("Loading..."),h=s[0],p=s[1];return(0,r.useEffect)((function(){var e=function(e){var n=e.slice(e.indexOf("https")).split("#"),t=n[0],r=(n[1],new URL(t).pathname.split("/").slice(1)),a=r[0],i=r[1];return r[2],"https://raw.githubusercontent.com/"+a+"/"+i+"/"+r[3]+"/"+r.slice(4).join("/")}(n),r=function(e,n,t){return d.apply(this,arguments)}(e,t,a);r.then((function(e){return p(e)}))})),(0,u.jsxs)("div",{fname:c,children:[(0,u.jsx)(l(),{language:i,metastring:o+" showLineNumbers",children:h}),(0,u.jsx)("div",{style:{fontSize:"0.9em",fontWeight:600,color:"rgb(14, 117, 221)",textAlign:"center",paddingBottom:"13px",textDecoration:"underline"},children:(0,u.jsx)("a",{href:n,target:"_blank",rel:"noreferrer noopener",children:"See full example on GitHub"})})]})};var p={rust:"\ud83e\udd80 Rust",js:"\ud83c\udf10 Javascript",ts:"\ud83c\udf10 Typescript"};function m(e){var n=e.children;return Array.isArray(n)||(n=[n]),(0,u.jsx)(a.Z,{className:"language-tabs",groupId:"code-tabs",children:n.map((function(e,n){return(0,u.jsx)(i.Z,{value:e.props.value,label:p[e.props.value],children:e})}))})}function g(e){var n=e.children,t=e.language;return Array.isArray(n)||(n=[n]),n=n.map((function(e){return function(e,n){var t=e.props,r=(t.children,t.url),a=t.start,i=t.end,c=t.fname;if(e.type===f)return f({url:r,start:a,end:i,language:n,fname:c});return e}(e,t)})),1==n.length?(0,u.jsx)(i.Z,{value:0,label:n[0].props.fname,children:n[0]}):(0,u.jsx)(a.Z,{className:"file-tabs",children:n.map((function(e,n){return(0,u.jsx)(i.Z,{value:n,label:e.props.fname,children:e})}))})}function f(e){var n=e.url,t=e.start,r=e.end,a=e.language,i=e.fname,c=e.metastring;return h({url:n,start:t,end:r,language:a,fname:i,metastring:c})}},95044:(e,n,t)=>{t.d(n,{Z:()=>r});const r=t.p+"assets/images/filled-nft-in-wallet-e661209d2dbff2bb2551db943ecfc43b.png"}}]);