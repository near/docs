"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4931],{29593:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>l});var a=n(85893),r=n(11151);n(2154);const o={id:"ethers-js",title:"NEAR for Ethereum developers"},s=void 0,i={id:"bos/tutorial/ethers-js",title:"NEAR for Ethereum developers",description:"NEAR components are chain-agnostic, enabling you to create decentralized frontends tailored for any Ethereum dApps. Throughout this article, we'll navigate prevalent use-cases with code snippets. You\u2019ll also find links to exemplary NEAR components for reference.",source:"@site/i18n/vi/docusaurus-plugin-content-docs/current/bos/tutorial/bos-ethersjs.md",sourceDirName:"bos/tutorial",slug:"/bos/tutorial/ethers-js",permalink:"/vi/bos/tutorial/ethers-js",draft:!1,unlisted:!1,editUrl:"https://github.com/near/docs/edit/master/website/../docs/bos/tutorial/bos-ethersjs.md",tags:[],version:"current",lastUpdatedBy:"Github Actions",lastUpdatedAt:1711465748e3,frontMatter:{id:"ethers-js",title:"NEAR for Ethereum developers"},sidebar:"tutorials",previous:{title:"WebSockets & QueryAPI",permalink:"/vi/bos/tutorial/queryapi-websockets"},next:{title:"Best Practices for Ethereum developers on NEAR",permalink:"/vi/bos/tutorial/ethers-js-best-practices"}},c={},l=[{value:"Interact with Ethereum using Ethers.js",id:"interact-with-ethereum-using-ethersjs",level:2},{value:"Example showing the difference between <code>Ethers.provider()</code> and <code>ethers.utils</code>:",id:"example-showing-the-difference-between-ethersprovider-and-ethersutils",level:4},{value:"FAQ",id:"faq",level:2},{value:"How to get a user account?",id:"how-to-get-a-user-account",level:3},{value:"How to get the current chain ID?",id:"how-to-get-the-current-chain-id",level:3},{value:"How to show a Web3Login button?",id:"how-to-show-a-web3login-button",level:3},{value:"How to load a contract ABI?",id:"how-to-load-a-contract-abi",level:3},{value:"How to load data from EVM nodes?",id:"how-to-load-data-from-evm-nodes",level:3},{value:"How to send a transaction to Ethereum nodes?",id:"how-to-send-a-transaction-to-ethereum-nodes",level:3},{value:"How to convert HEX values to human readable numbers?",id:"how-to-convert-hex-values-to-human-readable-numbers",level:3},{value:"How to locate the ABI of a Smart Contract?",id:"how-to-locate-the-abi-of-a-smart-contract",level:3},{value:"Is there an example of applications with a description of how they were created?",id:"is-there-an-example-of-applications-with-a-description-of-how-they-were-created",level:3},{value:"Examples",id:"examples",level:2}];function d(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:"NEAR components are chain-agnostic, enabling you to create decentralized frontends tailored for any Ethereum dApps. Throughout this article, we'll navigate prevalent use-cases with code snippets. You\u2019ll also find links to exemplary NEAR components for reference."}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsx)(t.h2,{id:"interact-with-ethereum-using-ethersjs",children:"Interact with Ethereum using Ethers.js"}),"\n",(0,a.jsxs)(t.p,{children:["The NEAR VM has imported the ",(0,a.jsx)(t.a,{href:"https://docs.ethers.org/",children:"Ethers.js"})," library, allowing for seamless interaction with Ethereum nodes using JavaScript in a NEAR component."]}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.code,{children:"Ethers"})," object exposes the provider connection:"]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"Ethers.provider()"})," is a read-only connection to the blockchain, which allows querying the blockchain state (e.g., account, block or transaction details), querying event logs or evaluating read-only code using call.","\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"Ethers.provider().getSigner()"})," abstracts the class that interacts with an account","\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"Ethers.provider().getSigner().getBalance()"})," returns a Promise that resolves to the account address."]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"Ethers.provider().getBlockNumber()"})," looks up the current block number (i.e. height)"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"Ethers.provider().getFeeData()"})," gets the best guess at the recommended FeeData"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:["You can see various ways of using ",(0,a.jsx)(t.code,{children:"Ethers"})," objects on the ",(0,a.jsx)(t.a,{href:"https://docs.ethers.org/",children:"Ethers documentation portal"}),")."]}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsxs)(t.p,{children:["Furthermore, numerous ",(0,a.jsx)(t.a,{href:"https://docs.ethers.org/v6/api/utils/",children:"basic tools"}),"  can be found in the ethers.utils object (be aware of the lowercase 'e')."]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"ethers.utils.parseUnits(value, unit)"}),' converts the decimal string value to a BigInt, assuming unit decimal places. The unit may the number of decimal places or the name of a unit (e.g. "gwei" for 9 decimal places).']}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"ethers.utils.formatEther(wei)"})," converts value into a decimal string using 18 decimal places."]}),"\n"]}),"\n",(0,a.jsxs)(t.h4,{id:"example-showing-the-difference-between-ethersprovider-and-ethersutils",children:["Example showing the difference between ",(0,a.jsx)(t.code,{children:"Ethers.provider()"})," and ",(0,a.jsx)(t.code,{children:"ethers.utils"}),":"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'    Ethers.provider()\n        .getSigner()\n        .getBalance()\n        .then((balance) => {\n            console.log("Your ETH balance: ", ethers.utils.formatEther(balance))\n        });\n'})}),"\n",(0,a.jsx)(t.h2,{id:"faq",children:"FAQ"}),"\n",(0,a.jsx)(t.h3,{id:"how-to-get-a-user-account",children:"How to get a user account?"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const receiver = Ethers.provider().send("eth_requestAccounts", [])[0];\n'})}),"\n",(0,a.jsx)(t.h3,{id:"how-to-get-the-current-chain-id",children:"How to get the current chain ID?"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:"Ethers.provider().getNetwork().then((chainIdData) => {\n    console.log(chainIdData.chainId);\n});\n"})}),"\n",(0,a.jsx)(t.h3,{id:"how-to-show-a-web3login-button",children:"How to show a Web3Login button?"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'<Web3ConnectButton \n    className="my-class" \n    connectLabel="Connect Web3 Wallet" \n    disconnectLabel="Disconnect Web3 Wallet"\n    connectingLabel="Connecting..." \n/>\n'})}),"\n",(0,a.jsx)(t.h3,{id:"how-to-load-a-contract-abi",children:"How to load a contract ABI?"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'const abi = fetch(`https://eth.blockscout.com/api?module=contract&action=getabi&address=0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2`);\n\nif (!abi.ok) {\n    return "Loading";\n}\n\nconsole.log(abi.body.result);\n'})}),"\n",(0,a.jsx)(t.h3,{id:"how-to-load-data-from-evm-nodes",children:"How to load data from EVM nodes?"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'// create a contract interface\nconst iface = new ethers.utils.Interface(abi.body.result);\n\n// encode the balanceOf get request\nconst encodedBalanceData = iface.encodeFunctionData("balanceOf", [receiver]);\n\n// perform a call\nEthers.provider().call({\n    to: "0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",\n    data: encodedBalanceData,\n})\n.then((rawBalance) => {\n    // decode the result\n    const receiverBalanceHex = iface.decodeFunctionResult(\n        "balanceOf",\n        rawBalance\n    );\n    console.log(Big(receiverBalanceHex).toFixed());\n});\n'})}),"\n",(0,a.jsx)(t.h3,{id:"how-to-send-a-transaction-to-ethereum-nodes",children:"How to send a transaction to Ethereum nodes?"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'// create a contract instance\nconst wEthContract = new ethers.Contract(\n    "0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",\n    abi.body.result,\n    Ethers.provider().getSigner()\n);\n\n// perform a given method (withdraw in this case)\nwEthContract\n    .withdraw(balance, {\n        value: 0\n    })\n    .then((transactionHash) => {\n        console.log(transactionHash);\n    });\n'})}),"\n",(0,a.jsx)(t.h3,{id:"how-to-convert-hex-values-to-human-readable-numbers",children:"How to convert HEX values to human readable numbers?"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:"// use Big().toFixed method\n\nBig(balanceHex).toFixed()\n"})}),"\n",(0,a.jsx)(t.h3,{id:"how-to-locate-the-abi-of-a-smart-contract",children:"How to locate the ABI of a Smart Contract?"}),"\n",(0,a.jsx)(t.p,{children:"Utilize platforms like etherscan.com and blockscout.com, or delve into the project's GitHub repositories and documentation."}),"\n",(0,a.jsx)(t.h3,{id:"is-there-an-example-of-applications-with-a-description-of-how-they-were-created",children:"Is there an example of applications with a description of how they were created?"}),"\n",(0,a.jsxs)(t.p,{children:["Yes, there is an article that describes ",(0,a.jsx)(t.a,{href:"/vi/bos/tutorial/ethers-js-best-practices",children:"best practices for creating applications for Ethereum developers on NEAR"}),", with a breakdown of individual steps."]}),"\n",(0,a.jsx)(t.h2,{id:"examples",children:"Examples"}),"\n",(0,a.jsx)(t.p,{children:"Below is a curated list of NEAR components, developed by the community, that epitomize the best practices for creating NEAR components:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"https://near.org/near/widget/ComponentDetailsPage?src=zavodil.near/widget/unwrap-weth&tab=source",children:"Unwrap ETH"})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"https://near.org/near/widget/ComponentDetailsPage?src=zavodil.near/widget/erc20-sender&tab=source",children:"ERC-20 Token sender"})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"https://near.org/near/widget/ComponentDetailsPage?src=zavodil.near/widget/Lido&tab=source",children:"Lido Component"})}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.a,{href:"https://near.org/near/widget/ComponentDetailsPage?src=zavodil.near/widget/swap&tab=source",children:"Swap component"})," (a set of swap dApps for Ethereum Mainnet, Polygon Mainnet, Polygon zkevm, Aurora, NEAR, etc)"]}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"https://near.org#/near/widget/ComponentDetailsPage?src=chanon.near/widget/1inch",children:"1inch"})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"https://near.org/near/widget/ComponentDetailsPage?src=garlicfaucet.near/widget/liquityWidget",children:"Liquity"})}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},2154:(e,t,n)=>{n.d(t,{W:()=>i});var a=n(67294),r=n(93293),o=n(91262),s=n(85893);function i(e){var t=e.children,i=e.id,c=void 0===i?1:i,l=e.height,d=void 0===l?"160px":l;return(0,s.jsx)(o.Z,{fallback:(0,s.jsx)("div",{children:" Loading... "}),children:function(){var e="";try{t.length||(t=[t]),e=t[0].props.children.props.children}catch(w){}var o=n(58613),i=o.Widget,l=o.useInitNear,h=n(2302).ZP,u=(0,a.useState)(e),p=u[0],g=u[1],m=l().initNear,x=(0,r.O)().selector;return(0,a.useEffect)((function(){m&&x&&m({networkId:"testnet",selector:x})}),[m,x]),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"monaco",children:(0,s.jsx)(h,{height:d,value:p,options:{minimap:{enabled:!1},wordWrap:"on",scrollBeyondLastLine:!1,fontSize:"14px",renderLineHighlight:!1,hideMargin:!0,glyphMargin:!1,folding:!1,lineNumbers:!1,lineDecorationsWidth:0,lineNumbersMinChars:0,scrollBars:!1},onChange:function(e,t){return g(e)}})}),(0,s.jsx)("div",{className:"code_iframe",children:(0,s.jsx)("div",{className:"bootstrap-scope",children:(0,s.jsx)("div",{className:"vm-widget",children:(0,s.jsx)(i,{code:p},c)})})}),t[1]]})}})}},11151:(e,t,n)=>{n.d(t,{Z:()=>i,a:()=>s});var a=n(67294);const r={},o=a.createContext(r);function s(e){const t=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),a.createElement(o.Provider,{value:t},e.children)}}}]);